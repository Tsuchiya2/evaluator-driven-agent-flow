# EDAF v1.0 - Claude Code Configuration

## Language Preferences

This file is auto-generated by `/setup` command.
Do not edit manually - run `/setup` again to change preferences.

**Current Settings:**

- **Documentation Language**: English
- **Terminal Output Language**: English
- **Save Dual Language Docs**: No

---

## EDAF 4-Phase Gate System

**When the user requests to implement a feature using "エージェントフロー" (agent flow) or "EDAF", follow this workflow:**

> **Detailed instructions for each phase are in `.claude/skills/edaf-orchestration/`**

### Quick Reference

| Phase | Agent | Evaluators | Pass Criteria |
|-------|-------|------------|---------------|
| 1. Design | designer | 7 design evaluators | All ≥ 7.0/10 |
| 2. Planning | planner | 7 planner evaluators | All ≥ 7.0/10 |
| 2.5 Implementation | 4 workers | - | Code complete |
| 3. Code Review | - | 7 code evaluators + UI verification | All ≥ 7.0/10 |
| 4. Deployment | - | 5 deployment evaluators | All ≥ 7.0/10 |

### Phase 1: Design Gate
→ See `.claude/skills/edaf-orchestration/PHASE1-DESIGN.md`

1. Launch `designer` agent
2. Design document → `docs/designs/{feature-slug}.md`
3. Run 7 design evaluators in parallel
4. Revise until all pass

### Phase 2: Planning Gate
→ See `.claude/skills/edaf-orchestration/PHASE2-PLANNING.md`

1. Launch `planner` agent
2. Task plan → `docs/plans/{feature-slug}-tasks.md`
3. Run 7 planner evaluators in parallel
4. Revise until all pass

### Phase 2.5: Implementation
→ See `.claude/skills/edaf-orchestration/PHASE25-IMPLEMENTATION.md`

Launch workers in order:
1. `database-worker-v1-self-adapting`
2. `backend-worker-v1-self-adapting`
3. `frontend-worker-v1-self-adapting`
4. `test-worker-v1-self-adapting`

### Phase 3: Code Review Gate
→ See `.claude/skills/edaf-orchestration/PHASE3-CODE.md`

1. Run 7 code evaluators in parallel
2. Fix issues until all pass
3. **If frontend modified**: Launch `ui-verification-worker`
   - See `.claude/skills/ui-verification/` for patterns
   - Screenshots → `docs/screenshots/{feature-slug}/`
   - Report → `docs/reports/phase3-ui-verification-{feature-slug}.md`

### Phase 4: Deployment Gate (Optional)
→ See `.claude/skills/edaf-orchestration/PHASE4-DEPLOYMENT.md`

1. Run 5 deployment evaluators in parallel
2. Fix issues until all pass

---

## Critical Rules

1. **NEVER skip phases**
2. **ALWAYS launch evaluators in parallel** (use Task tool)
3. **ALWAYS wait for ALL evaluators to approve** (≥ 7.0/10)
4. **Use `ui-verification-worker`** for frontend verification (Phase 3)

---

## Available Commands

| Command | Description |
|---------|-------------|
| `/setup` | Configure language preferences and project settings |
| `/edaf-status` | Show current phase and progress |
| `/edaf-evaluate <phase> <feature>` | Run evaluators for a phase |
| `/edaf-verify-ui <feature>` | Run UI verification |
| `/edaf-report <feature>` | Display evaluation reports |

---

## Skills Reference

| Skill | Purpose | Location |
|-------|---------|----------|
| edaf-orchestration | Phase workflow patterns | `.claude/skills/edaf-orchestration/` |
| edaf-evaluation | Scoring framework | `.claude/skills/edaf-evaluation/` |
| ui-verification | Browser automation patterns | `.claude/skills/ui-verification/` |

---

## Workers & Evaluators

### Workers (Phase 2.5)
- `database-worker-v1-self-adapting` - Database models, migrations
- `backend-worker-v1-self-adapting` - APIs, business logic
- `frontend-worker-v1-self-adapting` - UI components
- `test-worker-v1-self-adapting` - Unit/integration tests
- `ui-verification-worker` - UI/UX verification (Phase 3)

### Evaluators

**Phase 1 (Design):** design-{consistency, extensibility, goal-alignment, maintainability, observability, reliability, reusability}-evaluator

**Phase 2 (Planning):** planner-{clarity, deliverable-structure, dependency, goal-alignment, granularity, responsibility-alignment, reusability}-evaluator

**Phase 3 (Code):** code-{quality, testing, security, documentation, maintainability, performance, implementation-alignment}-evaluator-v1-self-adapting

**Phase 4 (Deployment):** {deployment-readiness, production-security, observability, performance-benchmark, rollback-plan}-evaluator

---

## Model Selection

| Model | Agents | Use Case |
|-------|--------|----------|
| `opus` | Designer, Security Evaluators | Critical decisions |
| `sonnet` | Planner, Workers, Most Evaluators | Standard tasks |
| `haiku` | Simple Evaluators | Pattern checks |

See `.claude/agent-models.yml` for details.

---

## Notification System

Automatic notifications via hooks in `.claude/settings.json`:

| Event | Sound |
|-------|-------|
| Evaluator completes | WarblerSong |
| Worker completes | WarblerSong |
| Task completes | CatMeow |

Manual: `bash .claude/scripts/notification.sh "Message" WarblerSong`

---

## Instructions for Claude Code

### Terminal Output Language
Respond in **ENGLISH** for all output.

### Documentation Language
Generate documentation in **ENGLISH**.

### Worker Instructions
All workers: Follow language settings, use project naming conventions.

### Evaluator Instructions
All evaluators: Output in terminal language, generate reports in documentation language.

---

**Last Updated**: Auto-generated by `/setup` command
**Configuration**: `.claude/edaf-config.yml`
